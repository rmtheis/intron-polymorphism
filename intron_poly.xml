<!-- Galaxy Tool Definition File -->
<tool id="intron_poly" name="intron-polymorphism" version="0.1">
  <description></description>
  <version_command>ip_handler.pl --version</version_command>
  <command interpreter="perl">
    ip_handler.pl 
      --ref-genome $ref_genome 
      -1 $mate1s 
      -2 $mate2s 
      --output-file $output_file
      --num-threads $num_threads
      
      #if $str($validateReads) == "true"
        --validate-reads
  </command>
  <inputs>
    <param format="fastqillumina" name="mate1s" type="data" label="FASTQ reads file" />
    <param format="fastqillumina" name="mate2s" type="data" label="FASTQ reads file" />
    <param format="fasta" name="ref_genome" type="data" label="FASTA reference genome" />
    <!-- frag_length: no default value. -->
    <param name="min_mates" type="integer" value="3" label="The minimum number of mates required to form a group in the grouping step in the pipeline. (-a)" />
    <param name="min_contig_length" type="integer" value="16" label="The minimum contig length needed for assembline the mates in a group. This value is passed to the Taipan assembler. (-l)" />
    <param name="max_intron_length" type="integer" value="250" label="The intron length value to use when looking for groups of introns near one another. This value contributes to a distance value
that determines whether mates are close enough together to form a group. (-m)" />
    <param name="minins" type="integer" value="0" label="The minimum fragment length for valid paired-end alignments. This value is passed to Bowtie for the initial mapping. (-I)" />
    <param name="maxins" type="integer" value="3000" label="The maximum fragment length for valid paired-end alignments. This value is passed to Bowtie for the initial mapping. (-X)" />
    <conditional name="threads">
      <param name="how_to_name" type="select" label="Number of threads">
        <option value="no">Run on all available cores (default)</option>
        <option value="yes">Set number of cores to use</option>
      </param>
      <when value="yes">
        <param name="num_threads" type="integer" value="4" label="Enter number of cores to use"/>
      </when>
      <when value="no" />
    </conditional>
    <param name="num_threads" type="boolean" truevalue="true" falsevalue="false" checked="no" label="Validate the FASTQ reads files? (--validate-reads)" help="" />
    <!-- skip-to: needs drop-down select -->
    <!-- existing-bwt-index-dir -->
    <!-- existing-align-file -->
    <!-- existing-contigs-file -->
  </inputs>
  
  <outputs>
    <data format="txt" name="output_file" label="intron-poly results" />
  </outputs>
  
  <tests>
  </tests>
  
  <help>
  	Runs the ip_handler.pl script.
  </help>
</tool>
